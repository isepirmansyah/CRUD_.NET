@page
@model LoginModel

@{
    ViewData["Title"] = "Log in";
    // Layout = "~/Pages/Shared/_Layout.cshtml"; // Bisa dihapus jika _ViewStart.cshtml sudah benar
}

<h1 class="text-4xl font-bold mb-6 text-center">@ViewData["Title"]</h1>

<div class="card bg-base-100 shadow-xl p-8 max-w-md mx-auto">
    <div class="card-body">
        <h2 class="card-title text-2xl mb-4 text-center">Use a local account to log in.</h2>
        <form id="account" method="post">
            <div asp-validation-summary="ModelOnly" class="alert alert-error mb-4" role="alert"></div>

            <div class="form-control mb-4">
                <label asp-for="Input.Email" class="label">
                    <span class="label-text">Email</span>
                </label>
                <input asp-for="Input.Email" class="input input-bordered w-full" autocomplete="username"
                    aria-required="true" placeholder="name@example.com" />
                <span asp-validation-for="Input.Email" class="label-text-alt text-error text-sm mt-1"></span>
            </div>

            <div class="form-control mb-4">
                <label asp-for="Input.Password" class="label">
                    <span class="label-text">Password</span>
                </label>
                <input asp-for="Input.Password" class="input input-bordered w-full" autocomplete="current-password"
                    aria-required="true" placeholder="password" />
                <span asp-validation-for="Input.Password" class="label-text-alt text-error text-sm mt-1"></span>
            </div>

            <div class="form-control mb-6">
                <label class="label cursor-pointer justify-start gap-2">
                    <input asp-for="Input.RememberMe" type="checkbox" class="checkbox" />
                    <span asp-for="Input.RememberMe" class="label-text">@Html.DisplayNameFor(m =>
                                                m.Input.RememberMe)</span>
                </label>
            </div>

            <button id="login-submit" type="submit" class="w-full btn btn-primary btn-lg"><i
                    class="fa-solid fa-sign-in-alt mr-2"></i> Log in</button>
        </form>

        <div class="divider my-6">OR</div> <!-- Divider for better visual separation -->

        <div class="flex flex-col gap-3 text-center">
            <p>
                <a id="forgot-password" asp-page="./ForgotPassword" class="link link-hover text-info"><i
                        class="fa-solid fa-question-circle mr-1"></i> Forgot your password?</a>
            </p>
            <p>
                <a asp-page="./Register" asp-route-returnUrl="@Model.ReturnUrl" class="link link-hover text-success"><i
                        class="fa-solid fa-user-plus mr-1"></i> Register as a new user</a>
            </p>
            <p>
                <a id="resend-confirmation" asp-page="./ResendEmailConfirmation" class="link link-hover text-warning"><i
                        class="fa-solid fa-envelope mr-1"></i> Resend email confirmation</a>
            </p>
        </div>

        @* External Login section (uncomment if you configure external providers like Google, Facebook, etc.) *@
        @*
            <div class="divider my-6">External Logins</div>
            <section>
                @{
                    if ((Model.ExternalLogins?.Count ?? 0) == 0)
                    {
                        <p class="text-center text-gray-500">
                            No external authentication services configured.
                        </p>
                    }
                    else
                    {
                        <form id="external-account" asp-page="./ExternalLogin" asp-route-returnUrl="@Model.ReturnUrl" method="post" class="form-horizontal">
                            <div class="flex flex-col gap-2">
                                @foreach (var provider in Model.ExternalLogins!)
                                {
                                    <button type="submit" class="btn btn-block btn-outline" name="provider" value="@provider.Name" title="Log in using your @provider.DisplayName account">
                                        <i class="fa-brands @(provider.Name == "Google" ? "fa-google" : provider.Name == "Facebook" ? "fa-facebook" : "fa-globe") mr-2"></i> @provider.DisplayName
                                    </button>
                                }
                            </div>
                        </form>
                    }
                }
            </section>
        *@
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}